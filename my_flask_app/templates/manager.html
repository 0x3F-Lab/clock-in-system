{% extends "base.html" %}

{% block title %}Manager View{% endblock %}

{% block content %}
<h1>Weekly Summary</h1>
<table class="styled-table">
    <thead>
        <tr>
            <th>Staff Name</th>
            <th>Weekday</th>
            <th>Weekend</th>
            <th>Public Holidays</th>
            <th>Deliveries</th>
        </tr>
    </thead>
    <tbody>
        {% for employee in summary %}
        <tr>
            <td>{{ employee.name }}</td>
            <td>{{ employee.weekday_hours }}</td>
            <td>{{ employee.weekend_hours }}</td>
            <td>{{ employee.public_holidays }}</td>
            <td>{{ employee.deliveries }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h1>Logs</h1>
<table class="styled-table">
    <thead>
        <tr>
            <th>Staff Name</th>
            <th>Login Time</th>
            <th>Is Public Holiday</th>
            <th>Logout Time</th>
            <th>Deliveries</th>
            <th>Login Timestamp</th>
            <th>Logout Timestamp</th>
        </tr>
    </thead>
    <tbody>
        {% for log in logs %}
        <tr>
            <td>{{ log.employee.name }}</td>
            <td class="utc-time">{{ log.login_time }}</td>
            <td>{{ 'Yes' if log.is_public_holiday else 'No' }}</td>
            <td class="utc-time">{{ log.logout_time }}</td>
            <td>{{ log.deliveries }}</td>
            <td class="utc-time">{{ log.login_time }}</td>
            <td class="utc-time">{{ log.logout_time }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h1>Add Employee</h1>
<form method="POST" action="{{ url_for('employee.add_employee_view') }}">
    <label for="new_employee">New Employee Name:</label>
    <input type="text" id="new_employee" name="new_employee" required>
    <button type="submit">Add Employee</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.utc-time').forEach(function(element) {
            const utcDate = new Date(element.textContent);
            element.textContent = utcDate.toLocaleString();
        });
    });
</script>
{% endblock %}
